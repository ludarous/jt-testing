<h1 id="title" class="title">{{('Registrace' | translate)}}</h1>

<nb-alert *ngIf="showMessages.error && errors?.length && !submitted" outline="danger" role="alert">
  <p class="alert-title"><b>{{('Ajaj' | translate)}}</b></p>
  <ul class="alert-message-list">
    <li *ngFor="let error of errors" class="alert-message">{{ error }}</li>
  </ul>
</nb-alert>

<nb-alert *ngIf="showMessages.success && messages?.length && !submitted" outline="success" role="alert">
  <p class="alert-title"><b>{{('Hurá' | translate)}}</b></p>
  <ul class="alert-message-list">
    <li *ngFor="let message of messages" class="alert-message">{{ message }}</li>
  </ul>
</nb-alert>

<form [formGroup]="form" (ngSubmit)="onSubmit()" aria-labelledby="title">

  <div class="form-control-group">
    <label class="label" for="login">{{'Přihlašovací jméno' | translate}}</label>
    <input nbInput
           formControlName="login"
           id="login"
           name="login"
           [placeholder]="'Přihlašovací jméno' | translate"
           autofocus
           fullWidth
           [status]="login.dirty ? (login.invalid  ? 'danger' : 'success') : ''"
           [attr.aria-invalid]="login.invalid && login.touched ? true : null">
    <ng-container *ngIf="login.invalid && login.touched">
      <p class="error-message" *ngIf="login.errors?.required">
        {{'Přihlašovací jméno je povinné' | translate}}
      </p>
      <p class="error-message" *ngIf="login.errors?.minlength || login.errors?.maxlength">
        {{'Přihlašovací jméno musí obsahovat alespoň 4 znaky' | translate}}
      </p>
    </ng-container>
  </div>

  <div class="form-control-group">
    <label class="label" for="email">{{'E-mail' | translate}}</label>
    <input nbInput
           formControlName="email"
           id="email"
           name="email"
           [placeholder]="'E-mail' | translate"
           fullWidth
           [status]="email.dirty ? (email.invalid  ? 'danger' : 'success') : ''"
           [attr.aria-invalid]="email.invalid && email.touched ? true : null">
    <ng-container *ngIf="email.invalid && email.touched">
      <p class="error-message" *ngIf="email.errors?.required">
        {{'E-mail je povinný' | translate}}
      </p>
      <p class="error-message" *ngIf="email.errors?.email">
        {{'Vyplň prosím validní e-mail' | translate}}
      </p>
    </ng-container>
  </div>

  <div class="form-control-group">
    <label class="label" for="password">{{'Heslo' | translate}}</label>
    <input nbInput
           formControlName="password"
           type="password"
           id="password"
           name="password"
           [placeholder]="'Heslo' | translate"
           fullWidth
           [status]="email.dirty ? (email.invalid  ? 'danger' : 'success') : ''"
           [attr.aria-invalid]="password.invalid && password.touched ? true : null">
    <ng-container *ngIf="password.invalid && password.touched">
      <p class="error-message" *ngIf="password.errors?.required">
        {{'Heslo je povinné' | translate}}
      </p>
      <p class="error-message" *ngIf="password.errors?.minlength || password.errors?.maxlength">
        {{'Heslo musí obsahovat alespoň 4 znaky' | translate}}
      </p>
    </ng-container>
  </div>

  <div class="form-control-group">
    <label class="label" for="confirmPassword">{{'Potvrzení hesla' | translate}}</label>
    <input nbInput
           formControlName="confirmPassword"
           type="password"
           id="confirmPassword"
           name="confirmPassword"
           [placeholder]="'Potvrzení hesla' | translate"
           fullWidth
           [status]="confirmPassword.dirty ? (confirmPassword.invalid || password.value != confirmPassword.value  ? 'danger' : 'success') : ''"
           [attr.aria-invalid]="confirmPassword.invalid && confirmPassword.touched ? true : null">
    <ng-container *ngIf="confirmPassword.invalid && confirmPassword.touched">
      <p class="error-message" *ngIf="confirmPassword.errors?.required">
        {{'Potvrzení hesla je povinné' | translate}}
      </p>
      <p class="error-message" *ngIf="password.value != confirmPassword.value && !confirmPassword.errors?.required">
        {{'Hesla se neshodují' | translate}}
      </p>
    </ng-container>
  </div>

  <div class="form-control-group accept-group" *ngIf="true">
    <nb-checkbox name="terms" formControlName="termsAgreement" [required]="true">
      {{'Souhlas s ' | translate}}<a href="#" target="_blank"><strong>{{'pravidly a podmínkami aplikace' | translate}}</strong></a>
    </nb-checkbox>
  </div>

  <button nbButton
          fullWidth
          status="success"
          [disabled]="submitted || !form.valid"
          [class.btn-pulse]="submitted">
    Register
  </button>
</form>

<!--<section *ngIf="socialLinks && socialLinks.length > 0" class="links" aria-label="Social sign in">-->
  <!--or enter with:-->
  <!--<div class="socials">-->
    <!--<ng-container *ngFor="let socialLink of socialLinks">-->
      <!--<a *ngIf="socialLink.link"-->
         <!--[routerLink]="socialLink.link"-->
         <!--[attr.target]="socialLink.target"-->
         <!--[attr.class]="socialLink.icon"-->
         <!--[class.with-icon]="socialLink.icon">{{ socialLink.title }}</a>-->
      <!--<a *ngIf="socialLink.url"-->
         <!--[attr.href]="socialLink.url"-->
         <!--[attr.target]="socialLink.target"-->
         <!--[attr.class]="socialLink.icon"-->
         <!--[class.with-icon]="socialLink.icon">{{ socialLink.title }}</a>-->
    <!--</ng-container>-->
  <!--</div>-->
<!--</section>-->

<section class="another-action" aria-label="Sign in">
  {{'Už máš účet? ' | translate}}<a class="text-link" routerLink="../login">{{'Přihlaš se' | translate}}</a>
</section>
