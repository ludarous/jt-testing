<div class="component-container-center">
  <form class="form" *ngIf="testForm" [formGroup]="testForm" (submit)="saveWorkout()">
    <div class="ui-inputgroup">
      <input type="text" pInputText placeholder="Název" formControlName="name" required>
      <p-message severity="error" text="Název testu je povinný"
                 *ngIf="!testForm.controls['name'].valid && testForm.controls['name'].touched"></p-message>
    </div>
    <div class="ui-inputgroup">
      <input type="text" pInputText placeholder="Minimální věk" formControlName="minAge">
    </div>
    <div class="ui-inputgroup">
      <input type="text" pInputText placeholder="Maximální věk" formControlName="maxAge">
    </div>
    <div class="ui-inputgroup">
      <p-autoComplete
        placeholder="Napiš kategorie testu"
        [multiple]="true"
        [suggestions]="suggestedCategories"
        (completeMethod)="search($event)"
        [(ngModel)]="selectedCategories"
        [ngModelOptions]="{standalone: true}"
        [forceSelection]="true"
        field="name"></p-autoComplete>
    </div>
    <div *ngIf="testActivities" class="ui-inputgroup">
      <p-pickList styleClass="edit-picklist"
                  [source]="suggestedActivities"
                  [target]="selectedActivities"
                  sourceHeader="Aktivity"
                  targetHeader="Vybrané aktivity"
                  filterBy="name"
                  dragdrop="true">
        <ng-template let-activity pTemplate="item">
          <div class="ui-helper-clearfix">
            {{activity.name}}
          </div>
          <div class="activity-picklist-categories">
            Kategorie:
            <ng-container *ngFor="let category of activity.categories">
              <span>{{category.name}}</span>
            </ng-container>
          </div>
        </ng-template>
      </p-pickList>
    </div>
    <div class="form-button-container">
      <button mat-raised-button>{{'Uložit' | translate}}</button>
      <br>
      <button type="button" mat-raised-button (click)="duplicateTest()">{{'Vytvořit kopii' | translate}}</button>
    </div>
  </form>
</div>
