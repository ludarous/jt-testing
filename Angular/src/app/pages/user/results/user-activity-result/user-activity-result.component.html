<mat-expansion-panel class="activity-result-panel">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <div>{{activityResult.activityName}}</div>
    </mat-panel-title>
    <mat-panel-description>
      <div><span class="info-label" translate>Hlavní výsledek aktivity: </span> {{activityResult.primaryResultValue}}
        {{activity.primaryResultValueUnit | enumTranslator: 'abbr'}}
      </div>
      <div><span class="info-label" translate>Vedlejší výsledek aktivity: </span>
        {{activityResult.secondaryResultValue}} {{activity.secondaryResultValueUnit | enumTranslator: 'abbr'}}
      </div>
    </mat-panel-description>
  </mat-expansion-panel-header>

  <ng-template matExpansionPanelContent>
    <div class="user-activity-result-container">
      <div class="user-activity-result-info">
        <div class="user-activity-name">{{activityResult.activityName}}</div>
        <div><span class="info-label" translate>Poznámka: </span>{{activityResult.note}}</div>
        <div>
          <span class="info-label" translate>Kategorie: </span>
          <span *ngFor="let category of activity.categories">{{category.name}}, {{(category.parent ? category.parent.name : '')}}</span>
        </div>
      </div>
      <div class="user-activity-content">
        <div *ngIf="activityStats">
          <div class="result-charts dark">
            <div class="row">
              <div class="col-7">
                <div class="chart-container" *ngIf="myPrimaryResultCardData">
                  <ngx-charts-number-card class="chart-container"
                                          [scheme]="getColorScheme('cool')"
                                          cardColor="#232837"
                                          emptyColor="#1e222e"
                                          [results]="myPrimaryResultCardData"
                                          [animations]="true"
                                          [valueFormatting]="valueFormat"
                                          [labelFormatting]="statusLabelFormat"
                                          (legendLabelClick)="onLegendLabelClick($event)"
                                          (select)="select($event)">
                  </ngx-charts-number-card>
                </div>
                <div class="chart-container" *ngIf="primaryCardsData">
                  <ngx-charts-number-card class="chart-container"
                                          [scheme]="getColorScheme('fire')"
                                          cardColor="#232837"
                                          emptyColor="#1e222e"
                                          [results]="primaryCardsData"
                                          [animations]="true"
                                          [valueFormatting]="valueFormat"
                                          [labelFormatting]="statusLabelFormat"
                                          (legendLabelClick)="onLegendLabelClick($event)"
                                          (select)="select($event)">
                  </ngx-charts-number-card>
                </div>
                <div class="chart-container">
                  <ngx-charts-linear-gauge
                    [scheme]="getColorScheme('cool')"
                    [animations]="true"
                    [min]="activityStats.activityResultsStats.primaryMin"
                    [max]="activityStats.activityResultsStats.primaryMax"
                    [value]="activityResult.primaryResultValue"
                    [previousValue]="activityStats.activityResultsStats.primaryAverage"
                    [units]="activity.primaryResultValueUnit | enumTranslator: 'plural'"
                    (select)="onSelect($event)">
                  </ngx-charts-linear-gauge>
                  <ngx-charts-bar-vertical-2d *ngIf="primaryChartData"
                                              class="chart-container"
                                              [scheme]="getColorScheme('cool')"
                                              [results]="primaryChartData"
                                              [animations]="true"
                                              [gradient]="false"
                                              [tooltipDisabled]="false"
                                              [xAxis]="true"
                                              [yAxis]="true"
                                              [legend]="true"
                                              [legendPosition]="'below'"
                                              [showXAxisLabel]="true"
                                              [showYAxisLabel]="true"
                                              [xAxisLabel]="xLabel"
                                              [showGridLines]="true"
                                              [barPadding]="8"
                                              [groupPadding]="10"
                                              [roundEdges]="true"
                                              [yScaleMax]="activityStats.activityResultsStats.primaryMax"
                                              [showDataLabel]="false"
                                              (legendLabelClick)="onLegendLabelClick($event)"
                                              (select)="select($event)">
                  </ngx-charts-bar-vertical-2d>
                </div>
              </div>
              <div *ngIf="activityResult.secondaryResultValue" class="col-5">
                <div class="chart-container" *ngIf="mySecondaryResultCardData">
                  <ngx-charts-number-card class="chart-container"
                                          [scheme]="getColorScheme('cool')"
                                          cardColor="#232837"
                                          emptyColor="#1e222e"
                                          [results]="mySecondaryResultCardData"
                                          [animations]="true"
                                          [valueFormatting]="valueFormat"
                                          [labelFormatting]="statusLabelFormat"
                                          (legendLabelClick)="onLegendLabelClick($event)"
                                          (select)="select($event)">
                  </ngx-charts-number-card>
                </div>
                <div class="chart-container" *ngIf="secondaryCardsData">
                  <ngx-charts-number-card class="chart-container"
                                          [scheme]="getColorScheme('air')"
                                          cardColor="#232837"
                                          emptyColor="#1e222e"
                                          [results]="secondaryCardsData"
                                          [animations]="true"
                                          [valueFormatting]="valueFormat"
                                          [labelFormatting]="statusLabelFormat"
                                          (legendLabelClick)="onLegendLabelClick($event)"
                                          (select)="select($event)">
                  </ngx-charts-number-card>
                </div>
                <div class="chart-container">
                  <ngx-charts-bar-vertical-2d *ngIf="secondaryChartData"
                                              class="chart-container"
                                              [scheme]="getColorScheme('cool')"
                                              [results]="secondaryChartData"
                                              [animations]="true"
                                              [gradient]="false"
                                              [tooltipDisabled]="false"
                                              [xAxis]="true"
                                              [yAxis]="true"
                                              [legend]="true"
                                              [legendPosition]="'below'"
                                              [showXAxisLabel]="true"
                                              [showYAxisLabel]="true"
                                              [xAxisLabel]="xLabel"
                                              [showGridLines]="true"
                                              [barPadding]="8"
                                              [groupPadding]="10"
                                              [roundEdges]="true"
                                              [yScaleMax]="activityStats.activityResultsStats.secondaryMax"
                                              [showDataLabel]="true"
                                              (legendLabelClick)="onLegendLabelClick($event)"
                                              (select)="select($event)">
                  </ngx-charts-bar-vertical-2d>
                </div>
              </div>
            </div>


          </div>
        </div>
      </div>
    </div>
  </ng-template>
</mat-expansion-panel>
